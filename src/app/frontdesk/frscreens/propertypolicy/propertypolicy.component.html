<div class="policy-container">
  <!-- View Mode -->
  <div *ngIf="!editMode" class="policy-view">
    <div *ngFor="let section of policyData" class="policy-section">
      <div class="section-header">
        <i *ngIf="section.icon" [class]="section.icon"></i>
        <h3>{{ section.title }}</h3>
      </div>
      <ul class="policy-items">
        <li *ngFor="let item of section.items" [class]="'item-' + item.status">
          <i *ngIf="item.icon" [class]="item.icon"></i>
          {{ item.text }}
        </li>
      </ul>
    </div>
  </div>

  <!-- Edit Mode -->
  <div *ngIf="editMode" class="policy-edit">
    <div *ngFor="let section of policyData; let i = index" class="edit-section">
      <div class="section-controls">
        <input type="text" [(ngModel)]="section.title" placeholder="Section Title">
        <input type="text" [(ngModel)]="section.icon" placeholder="Icon class">
        <button (click)="removeSection(i)" class="btn btn-danger">Remove</button>
      </div>

      <div *ngFor="let item of section.items; let j = index" class="item-controls">
        <select [(ngModel)]="item.status">
          <option value="allowed">Allowed</option>
          <option value="not_allowed">Not Allowed</option>
          <option value="conditional">Conditional</option>
          <option value="info">Information</option>
        </select>
        <input type="text" [(ngModel)]="item.text" placeholder="Policy text">
        <input type="text" [(ngModel)]="item.icon" placeholder="Item icon">
        <button (click)="removeItem(i, j)" class="btn btn-danger">Ã—</button>
      </div>
      <button (click)="addItem(i)" class="btn btn-secondary">Add Item</button>
    </div>

    <div class="edit-controls">
      <button (click)="addSection()" class="btn btn-primary">Add Section</button>
      <button (click)="saveChanges()" class="btn btn-success">Save All</button>
      <button (click)="cancelEdit()" class="btn btn-warning">Cancel</button>
    </div>
  </div>
</div>